# ESP32-S3 Debug Full Example - Complete Debug Configuration
# Based on ESP-IDF official examples with all debugging features enabled

# ============= FreeRTOS =============
# 1ms tick for better time resolution in traces
CONFIG_FREERTOS_HZ=1000
# Enable FreeRTOS runtime stats
CONFIG_FREERTOS_USE_TRACE_FACILITY=y
CONFIG_FREERTOS_GENERATE_RUN_TIME_STATS=y

# ============= SystemView Tracing =============
CONFIG_ESP_TRACE_ENABLE=y
CONFIG_ESP_TRACE_LIB_EXTERNAL=y
CONFIG_ESP_TRACE_TRANSPORT_APPTRACE=y
CONFIG_ESP_TRACE_TS_SOURCE_ESP_TIMER=y

# Enable all SystemView events for comprehensive tracing
CONFIG_SEGGER_SYSVIEW_EVT_OVERFLOW_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_ISR_ENTER_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_ISR_EXIT_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_ISR_TO_SCHED_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_START_EXEC_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_STOP_EXEC_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_START_READY_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_STOP_READY_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_CREATE_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TASK_TERMINATE_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_IDLE_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TIMER_ENTER_ENABLE=y
CONFIG_SEGGER_SYSVIEW_EVT_TIMER_EXIT_ENABLE=y

# ============= Heap Tracing =============
CONFIG_HEAP_TRACING=y
CONFIG_HEAP_TRACING_DEST_TRAX=y
CONFIG_HEAP_TRACING_STACK_DEPTH=4

# ============= Coredump =============
CONFIG_ESP_COREDUMP_ENABLE=y
CONFIG_ESP_COREDUMP_DATA_FORMAT_ELF=y
CONFIG_ESP_COREDUMP_CHECKSUM_CRC32=y
CONFIG_ESP_COREDUMP_CAPTURE_DRAM=y
CONFIG_ESP_COREDUMP_MAX_TASKS_NUM=16
# Save to flash (requires coredump partition)
CONFIG_ESP_COREDUMP_TO_FLASH_OR_UART=FLASH

# ============= Stack Protection =============
CONFIG_FREERTOS_WATCHPOINT_END_OF_STACK=y
CONFIG_FREERTOS_CHECK_STACKOVERFLOW_PTRVAL=y

# ============= Task Watchdog =============
CONFIG_ESP_TASK_WDT=y
CONFIG_ESP_TASK_WDT_PANIC=y
CONFIG_ESP_TASK_WDT_TIMEOUT_S=10
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU0=y

# ============= Logging =============
# Default log level
CONFIG_LOG_DEFAULT_LEVEL_INFO=y
CONFIG_LOG_DEFAULT_LEVEL=3

# ============= UART Console =============
CONFIG_ESP_CONSOLE_UART_DEFAULT=y
CONFIG_ESP_CONSOLE_UART_NUM=0
CONFIG_ESP_CONSOLE_UART_BAUDRATE=115200

# ============= Main Task =============
CONFIG_ESP_MAIN_TASK_STACK_SIZE=4096
