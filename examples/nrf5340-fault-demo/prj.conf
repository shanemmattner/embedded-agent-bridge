# RTT as primary log backend
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_LOG=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_BACKEND_UART=n
CONFIG_LOG_PRINTK=y

# Faster log processing
CONFIG_LOG_PROCESS_THREAD_STARTUP_DELAY_MS=0
CONFIG_LOG_BUFFER_SIZE=4096

# Shell over RTT (for fault injection commands)
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_RTT=y
CONFIG_SHELL_BACKEND_SERIAL=n
# Put shell on RTT channel 1 (channel 0 is log backend)
CONFIG_SHELL_BACKEND_RTT_BUFFER=1

# Thread awareness (for backtrace)
CONFIG_THREAD_NAME=y
CONFIG_THREAD_MONITOR=y

# Fault handling â€” keep Zephyr defaults (prints fault info)
CONFIG_CORTEX_M_DEBUG_MONITOR_HOOK=n

# Enable hardware stack protection (detects STKOF)
CONFIG_HW_STACK_PROTECTION=y

# Enable div-by-zero trap (SCB->CCR.DIV_0_TRP)
# CPU_CORTEX_M_HAS_BASEPRI is auto-set by the SoC; no manual override needed.
# nRF5340 Cortex-M33 has BASEPRI by default.

# GPIO (button-triggered faults)
CONFIG_GPIO=y

# Math
CONFIG_NEWLIB_LIBC=y
